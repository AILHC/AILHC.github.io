---
title: how-to-design-enet
categories:
  - 框架设计
  - EasyGameFramework
tags:
  - net
  - framework
  - network
  - design
comments: false
date: 2021-03-14 15:14:39
img:
---

# 前言

最近事情有点多，而且思路不太顺畅。也在思考🤔如何能够进行稳定的文章输出。

是我的主题过于宏大？是我写作能力有限？是我输入不够？是我没时间？

可能都有，正在尝试一些解决方案。(＾－＾)V

[介绍自己]

我翻来覆去，思虑了近一个月，最终做出了一个违背组训的决定。。。

**将通用网络模块设计方法上交给G家**

# 方法

跟妈妈说

"妈妈，我要买玩具~"

[配图:买玩具]

[配图:妈妈打脸]

这么鲁莽直接的方式，是很难买到玩具的。小玩同学可没那么笨(～￣(OO)￣)ブ。

为了实现买到心爱的玩具，小玩有如下几步骤

## 连接

和妈妈聊天，建立起彼此的信任，让她去超市时带上你。这一步非常重要。

## 察言观色，眼观六路，耳听八方

密切关注妈妈的心情，当妈妈走到玩具区附近时，心情不错的时候，要准备行动了。

## 请求

虽然非常想买喜欢的玩具，但表达的时候不能太直接，需要加以修饰包装，让妈妈更爱听，更快接受。

比如:妈妈，我数学考试考了第一名，我想买那个非常富有正义感的迪迦奥特曼玩具。

得到妈妈的允许，就可以拿下那个玩具了，可能妈妈会因为价格太高而回复你:太贵了。你可以再次指一个价格不那么高的。

## 告知

没到付完款的那一刻，都不能掉以轻心，得意忘形。

去游乐区玩，要告知一下妈妈，让她知道你在哪。不然到时你走失了，她就会非常担心又生气😠，不给你的奥特曼玩具付款。

之前做的一切都付之东海。

在游戏开发中的网络交互需求也差不多如此。

# 游戏开发中的网络交互需求

我举一个栗子🌰: 抽奖活动

实现一个抽奖活动，需求就是这么简单

我们分解一下流程和步骤:

1. 连接

   首先客户端需要和服务端建立连接才能进行后续的交互。

2. 监听

   然后客户端监听抽奖活动开启，活动开启后显示抽奖页面。

3. 请求

   玩家点击**抽奖按钮** 客户端发送抽奖请求给后端，等待后端返回结果，然后在回调里根据结果显示抽奖结算界面。

4. 告知

   玩家进入抽奖页面，如果没有抽奖就离开页面，就通知服务端。让服务端做统计或者后续再推送提示之类的处理。

如果有过网络开发经历的小伙伴也许秒懂。没经历过的，拿玩过的游戏来代入一下，也能发现

**大部分网络交互的业务需求的流程都由这四个步骤组合而来。**

那也就是说，我们的网络模块只需对上层业务提供**四个**接口就可以了。

1. connect 连接
2. onPush 监听推送
3. oncePush 监听一次推送(为了方便)
4. request 请求(会有回调处理服务器返回的结果)
5. notify 通知(只需传数据给服务器即可，不需等待结果返回)











